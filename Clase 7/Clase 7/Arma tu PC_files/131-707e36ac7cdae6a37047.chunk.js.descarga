(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[131],{1253:function(t,e,i){},1254:function(t,e,i){},1255:function(t,e,i){},1256:function(t,e,i){},1330:function(t,e,i){"use strict";var o=i(1253);i.n(o).a},1331:function(t,e,i){"use strict";var o=i(1254);i.n(o).a},1332:function(t,e,i){"use strict";var o=i(1255);i.n(o).a},1333:function(t,e,i){"use strict";var o=i(1256);i.n(o).a},1374:function(t,e,i){"use strict";i.r(e);var o=i(1),n=i(8),s=i(608),r=i(16),c=i(430),a=i(591);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p={data:()=>({$_sectionsOrderSortMixin_initialized:!1}),computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(r.c)(["isUsingNewComposerModal"])),updated(){this.$_sectionsOrderSortMixin_initialized?this.$_sectionsOrderSortMixin_makeSortable():this.$_sectionsOrderSortMixin_destroySortable()},beforeDestroy(){this.$_sectionsOrderSortMixin_destroySortable()},methods:{initializeSectionsOrderSort(){this.$_sectionsOrderSortMixin_initialized=!0},$_sectionsOrderSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionsOrderSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionsOrderSortMixin_makeSortable(){let t=Object(a.a)(this.$el);const e=this.isUsingNewComposerModal?".surface-section-title-new":".surface-section-title";t.sortable("instance")||t.sortable({axis:"x",cursor:"move",handle:e,items:"> .surface-section.section-sortable",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea",start:(t,e)=>{null==e.item.data("section-id")&&this.update(),this.$_sectionsOrderSortMixin_markItemAsTransiting(e.item)},stop:(t,e)=>{this.$_sectionsOrderSortMixin_unmarkItemAsTransiting(e.item)},update:(t,e)=>{this.sortedSection(c.a.getNewIndex(e.item))}})},$_sectionsOrderSortMixin_destroySortable:function(){let t=Object(a.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}}},u=i(49),h=i(289),b=i(432);function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var O,S,y={components:{MultilineInput:h.a,BaseIcon:u.a},mixins:[b.a],props:["section","sectionBeingEditedId"],data:()=>({maxLength:512}),computed:f(f(f(f({},Object(r.e)(["isWallOnboardingFlow","isIOS"])),Object(r.c)("section",{wallSections:"sections"})),Object(r.c)({isEditable:"canIModerate",canIEdit:"canIEdit"})),{},{sectionTitle(){return this.section.title},canEdit(){return this.canIEdit},isBeingEdited(){return this.sectionBeingEditedId&&this.sectionBeingEditedId===this.section.id&&!this.isWallOnboardingFlow},wallSectionsLength(){return this.wallSections.length},isEmptyState(){return this.isBeingEdited&&1===this.wallSectionsLength},titlePlaceholder(){return this.isEmptyState?this.__("Name your first section"):this.__("Name your section")}}),watch:{isBeingEdited(t){t&&this.$nextTick(()=>{this.$refs.title.focus()})}},mounted(){this.isBeingEdited&&this.$nextTick(()=>{this.$refs.title.focus()})},methods:f(f(f({},Object(r.b)("section",["changeSectionTitle","stopEditingSection","startEditingSection","showSectionActionMenu"])),Object(r.b)("snackbars",["setSnackbar"])),{},{saveTitle(){const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");if(t.length>0)this.changeSectionTitle({sectionId:this.section.id,title:t});else{const t=this.__("Section title cannot be empty.");this.setSnackbar({message:t})}},tryStartEditing(){this.canEdit&&!this.isBeingEdited&&this.startEditingSection({sectionId:this.section.id})},deleteSection(){this.$emit("delete")},onOutsideClick(){if(!this.isBeingEdited)return;const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");t.length>0?this.changeSectionTitle({sectionId:this.section.id,title:t}):this.stopEditingSection()}})},v=(i(1330),i(5)),w=Object(v.a)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"surface-section-title section-title",attrs:{"data-view-mode":t.isBeingEdited?"edit":"show"},on:{dblclick:t.tryStartEditing}},[i("div",{staticClass:"section-frame"},[i("div",{staticClass:"real-section"},[t.isBeingEdited?t._e():i("hgroup",[i("h2",{staticClass:"title",attrs:{dir:"auto"}},[t._v(t._s(t.sectionTitle))])]),t._v(" "),t.isBeingEdited?i("hgroup",{staticClass:"is-editing"},[i("multiline-input",{ref:"title",staticClass:"title",attrs:{dir:"auto",value:t.sectionTitle,maxlength:t.maxLength,placeholder:t.titlePlaceholder,required:""},on:{enter:t.saveTitle,escape:t.stopEditingSection},nativeOn:{paste:function(t){t.stopPropagation()}}})],1):t._e()]),t._v(" "),t.isBeingEdited?i("div",{staticClass:"button-list"},[t.isEmptyState?t._e():i("button",{staticClass:"button text-button",attrs:{title:t.__("Cancel")},on:{click:t.stopEditingSection}},[t._v("\n        "+t._s(t.__("Cancel"))+"\n      ")]),t._v(" "),i("button",{staticClass:"button text-button",attrs:{title:t.__("Done")},on:{click:t.saveTitle}},[t._v(t._s(t.__("Save")))])]):t._e(),t._v(" "),t.isEditable&&!t.isBeingEdited?i("button",{staticClass:"surface-section-actions icon-button",attrs:{title:t.__("Section actions")},on:{click:function(e){return t.showSectionActionMenu({sectionId:t.section.id})}}},[i("base-icon",{attrs:{name:"more_vert"}})],1):t._e()])])}),[],!1,null,null,null).exports,_=i(71),j=i(36),x=i(37),P=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},I=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let E=class extends(Object(o.c)()){constructor(){super(...arguments),this.OzTextButtonColorScheme=_.a,this.maxLength=512}get tailwindFontClass(){switch(this.fontId){case 1:return"font-sans";case 2:return"font-serif";case 3:return"font-cursive";case 4:return"font-padlet-monospace";default:return"font-sans"}}get sectionTitle(){return this.section.title}get isBeingEdited(){return this.sectionBeingEditedId&&this.sectionBeingEditedId===this.section.id&&!this.isWallOnboardingFlow}get wallSectionsLength(){return this.sections.length}get isEmptyState(){return this.isBeingEdited&&1===this.wallSectionsLength}get titlePlaceholder(){return this.isEmptyState?this.__("Name your first section"):this.__("Name your section")}handleIsBeingEdited(t){t&&this.$nextTick(()=>{this.$refs.title.focus()})}mounted(){this.isBeingEdited&&this.$nextTick(()=>{this.$refs.title.focus()})}saveTitle(){const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");if(t.length>0)this.changeSectionTitle({sectionId:this.section.id,title:t});else{const t=this.__("Section title cannot be empty.");this.setSnackbar({message:t})}}tryStartEditing(){this.canIEdit&&!this.isBeingEdited&&this.startEditingSection({sectionId:this.section.id})}deleteSection(){this.$emit("delete")}onOutsideClick(){if(!this.isBeingEdited)return;const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");t.length>0?this.changeSectionTitle({sectionId:this.section.id,title:t}):this.stopEditingSection()}};P([Object(o.e)(),I("design:type","function"===typeof(O="undefined"!==typeof x.Section&&x.Section)?O:Object)],E.prototype,"section",void 0),P([Object(o.e)(),I("design:type","function"===typeof(S="undefined"!==typeof x.Id&&x.Id)?S:Object)],E.prototype,"sectionBeingEditedId",void 0),P([n.c,I("design:type",Boolean)],E.prototype,"isWallOnboardingFlow",void 0),P([n.c,I("design:type",Boolean)],E.prototype,"isIOS",void 0),P([Object(n.d)("section").Getter,I("design:type",Array)],E.prototype,"sections",void 0),P([n.b,I("design:type",Boolean)],E.prototype,"canIModerate",void 0),P([n.b,I("design:type",Boolean)],E.prototype,"canIEdit",void 0),P([n.b,I("design:type",String)],E.prototype,"colorScheme",void 0),P([n.b,I("design:type",Number)],E.prototype,"fontId",void 0),P([n.b,I("design:type",String)],E.prototype,"dir",void 0),P([n.b,I("design:type",Boolean)],E.prototype,"isUsingNewSurfaceShadows",void 0),P([Object(o.g)("isBeingEdited"),I("design:type",Function),I("design:paramtypes",[Object]),I("design:returntype",void 0)],E.prototype,"handleIsBeingEdited",null),P([Object(n.d)("section").Action,I("design:type",Function)],E.prototype,"changeSectionTitle",void 0),P([Object(n.d)("section").Action,I("design:type",Function)],E.prototype,"stopEditingSection",void 0),P([Object(n.d)("section").Action,I("design:type",Function)],E.prototype,"startEditingSection",void 0),P([Object(n.d)("section").Action,I("design:type",Function)],E.prototype,"showSectionActionMenu",void 0),P([Object(n.d)("snackbars").Action,I("design:type",Function)],E.prototype,"setSnackbar",void 0),E=P([Object(o.a)({components:{MultilineInput:h.a,OzTextButton:_.b,OzIcon:j.default},mixins:[b.a]})],E);var C=E,k=Object(v.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{class:["surface-section-title-new","relative","rounded-xl","text-20","break-words",{"bg-dark-ui-100 text-light-text-100":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100":"light"===t.colorScheme},"font-semibold","mb-4","w-[254px]",t.tailwindFontClass,t.isUsingNewSurfaceShadows&&"shadow-elevation-1"],attrs:{"data-view-mode":t.isBeingEdited?"edit":"show"},on:{dblclick:t.tryStartEditing}},[i("div",{staticClass:"ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 py-2"},[t.isBeingEdited?t._e():i("hgroup",[i("h2",{attrs:{"data-cy":"sectionTitle"}},[t._v(t._s(t.sectionTitle))])]),t._v(" "),t.isBeingEdited?i("hgroup",[i("multiline-input",{ref:"title",class:[t.tailwindFontClass,"text-20",{"bg-dark-ui-100 text-light-text-100 placeholder-light-text-200":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100 placeholder-dark-text-200":"light"===t.colorScheme},,"font-semibold","m-0"],attrs:{dir:t.dir,value:t.sectionTitle,maxlength:t.maxLength,placeholder:t.titlePlaceholder,required:""},on:{enter:t.saveTitle,escape:t.stopEditingSection},nativeOn:{paste:function(t){t.stopPropagation()}}})],1):t._e()]),t._v(" "),t.isBeingEdited?i("div",{staticClass:"flex w-full justify-end h-8"},[t.isEmptyState?t._e():i("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"color-scheme":t.OzTextButtonColorScheme.Secondary,"dark-mode":"dark"===t.colorScheme,text:t.__("Cancel")},on:{click:t.stopEditingSection}}),t._v(" "),i("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"dark-mode":"dark"===t.colorScheme,text:t.__("Save")},on:{click:t.saveTitle}})],1):t._e(),t._v(" "),t.canIModerate&&!t.isBeingEdited?i("OzTextButton",{class:["absolute","leading-none","p-0","w-[32px]","h-[32px]","-end-1.25","top-[-2px]"],attrs:{"data-cy":"sectionAction","color-scheme":t.OzTextButtonColorScheme.SecondaryMuted,"dark-mode":"dark"===t.colorScheme,"aria-label":t.__("Section actions"),title:t.__("Section actions")},on:{click:function(e){return t.showSectionActionMenu({sectionId:t.section.id})}}},[i("OzIcon",{attrs:{name:"more_vertical",size:16}})],1):t._e()],1)}),[],!1,null,null,null).exports,B=i(603),T=i(32),M=i(47),$=i(321);function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(Object(i),!0).forEach((function(e){D(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function D(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var L={data:()=>({$_sectionSortMixin_initialized:!1,$_sectionSortMixin_savePostHandler:null}),beforeDestroy(){this.$_sectionSortMixin_destroySortable()},methods:N(N({},Object(r.b)(["changeDragging"])),{},{initializeSectionSort(t){this.$_sectionSortMixin_makeSortable(),this.$_sectionSortMixin_savePostHandler=t,t||Object(T.c)("Using SectionSortMixin without declaring a handler function to save post."),this.$_sectionSortMixin_initialized=!0},destroySectionSort(){this.$_sectionSortMixin_destroySortable(),this.$_sectionSortMixin_savePostHandler=null,this.$_sectionSortMixin_initialized=!1},$_sectionSortMixin_clipItems(t,e,i){let o,n,s=i.height(),r=i.width();if(s>144){let t=e.offsetY+(e.originalEvent.target.getBoundingClientRect().top-i[0].getBoundingClientRect().top);if(t>144){s-t<144?(n=s-144,o=s):(n=t-72,o=n+144),i.data("clipTop",n)}else n=0,o=144;i.css("clip",`rect(${n-20}px, ${r+30}px, ${o+40}px, -20px)`)}t.addClass("ui-sortable-clipped")},$_sectionSortMixin_unclipItems(t,e,i){let o=document.getElementById("wall-container"),n=i[0].offsetTop;t.removeClass("ui-sortable-clipped");let s=null!=i.data("clipTop")?i.data("clipTop"):0,r=null!=i.data("scrollTop")?i.data("scrollTop"):0,c=i[0].offsetTop-n;o.scrollTop=r+c+s,i.removeData("clipTop"),i.removeData("scrollTop")},$_sectionSortMixin_saveScrollPosition(t,e,i){let o=document.getElementById("wall-container");i.data("scrollTop",o.scrollTop)},$_sectionSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionSortMixin_savePost({sectionId:t,sortIndex:e,postCid:i,previousCid:o,nextCid:n}){this.$_sectionSortMixin_savePostHandler?(Object(M.a)("wishOrderArray")&&this.$_sectionSortMixin_savePostHandler({sectionId:t,postCid:i,previousCid:o,nextCid:n}),Object(M.a)("wishOrderArray")||this.$_sectionSortMixin_savePostHandler({sectionId:t,postCid:i,sortIndex:e})):Object(T.a)(new Error("No handler to save post for SectionSortMixin."))},$_sectionSortMixin_makeSortable(){let t=Object(a.a)(this.$el).find(".section-posts");t.sortable("instance")||t.sortable({connectWith:".surface-section .section-posts",cursor:"move",items:"> .wish-editable:not(#wish-new)",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea, select, option",start:(e,i)=>{Object(a.a)(this.$el).parent().addClass("ui-sortable-sorting"),t.addClass("ui-sortable-sorting"),this.$_sectionSortMixin_clipItems(t,e,i.item),t.sortable("refreshPositions"),this.$_sectionSortMixin_markItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!0})},beforeStop:(e,i)=>{this.$_sectionSortMixin_saveScrollPosition(t,e,i.item)},stop:(e,i)=>{Object(a.a)(this.$el).parent().removeClass("ui-sortable-sorting"),t.removeClass("ui-sortable-sorting"),"stream"!==this.$_sectionSortMixin_format&&"shelf"!==this.$_sectionSortMixin_format||this.$_sectionSortMixin_unclipItems(t,e,i.item),this.$_sectionSortMixin_unmarkItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!1})},over:(t,e)=>{e.item.data("newSectionId",this.currentSectionId)},change:(t,e)=>{e.item.removeData("prevWishId nextWishId previousCid nextCid");let i=e.placeholder;e.item.data({prevWishId:i.prev(".wish").attr("id"),nextWishId:i.next(".wish").attr("id"),previousCid:i.next(".wish").data("postCid"),nextCid:i.prev(".wish").data("postCid")})},remove:(e,i)=>{i.placeholder.remove(),t.sortable("cancel")},update:(t,e)=>{var i;e.item.data("newSectionId")===this.currentSectionId&&((i={}).sectionId=this.currentSectionId,i.prevId=e.item.data("prevWishId"),i.nextId=e.item.data("nextWishId"),i.prevId||(i.prevId=null),i.nextId||(i.nextId=null),Object(M.a)("wishOrderArray")&&this.$_sectionSortMixin_savePost({sectionId:this.currentSectionId,postCid:e.item.data("postCid"),previousCid:e.item.data("previousCid"),nextCid:e.item.data("nextCid")}),Object(M.a)("wishOrderArray")||Object($.a)(e.item,i),e.item.removeData("newSectionId prevWishId nextWishId previousCid nextCid"))}})},$_sectionSortMixin_destroySortable(){let t=Object(a.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}})},F=i(516);function z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function H(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?z(Object(i),!0).forEach((function(e){R(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function R(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var W={components:{BaseIcon:u.a,SurfacePost:B.a,SurfaceSectionTitle:w,SurfaceSectionTitleNew:k},mixins:[L],props:{section:{type:Object,default:()=>({})}},data:()=>({xNewPostModal:Object(M.a)("newPostEditModal")}),computed:H(H(H(H(H(H(H(H({},Object(r.e)(["inlinePostEdit","isFirefox","isSafari"])),Object(r.c)("post",["postBeingEditedCid","postEntitiesByCid","postCidsBySection","postOrder"])),Object(r.e)("section",["sectionEntities","sectionBeingEditedId"])),Object(r.c)("section",{wallSections:"sections"})),Object(r.c)({colorScheme:"colorScheme",backgroundLuminance:"backgroundLuminance",canReorder:"canIModerate"})),Object(r.c)(["canIModerate","newPostLocation","isPostable","isUsingNewSurfaceShadows"])),Object(r.c)("nativeApp",["shelfSectionBottomPaddingPx"])),{},{sectionDomId(){return Object(F.b)(this.currentSectionId)},wallSectionsLength(){return this.wallSections.length},currentSectionId(){return 0===this.wallSectionsLength?this.sectionBeingEditedId:this.section.id},currentSection(){return this.sectionEntities[this.currentSectionId]},sortIndex(){return this.currentSection.sort_index},sectionColor(){return this.currentSection.color},postCidsInCurrentSection(){return this.postCidsBySection[this.currentSectionId]||[]},sortedSectionPosts(){const t=this.postCidsInCurrentSection.map(t=>this.postEntitiesByCid[t]);if(Object(M.a)("wishOrderArray")&&(!this.postOrder||0===this.postOrder.length))return[];if(!this.inlinePostEdit){const e=t.filter(t=>t.id||!!t.body||!!t.subject||!!t.attachment);return Object(M.a)("wishOrderArray")?Object($.g)(e,this.postOrder):Object($.h)(e)}return Object(M.a)("wishOrderArray")||Object(M.a)("wishOrderArray")||Object(M.a)("wishOrderArray")||Object(M.a)("wishOrderArray")||Object(M.a)("wishOrderArray")||Object(M.a)("wishOrderArray")?Object($.g)(t,this.postOrder):Object($.h)(t)},canAddPost(){return this.isPostable&&(!this.sectionBeingEditedId||this.section.id!==this.sectionBeingEditedId)},shouldShowButtonAtTop(){return this.canAddPost&&"top"===this.newPostLocation},shouldShowButtonAtBottom(){return this.canAddPost&&"bottom"===this.newPostLocation}}),mounted(){this.isPostable&&(Object(M.a)("wishOrderArray")&&this.initializeSectionSort(({postCid:t,sectionId:e,previousCid:i,nextCid:o})=>{this.sortedPost({postCid:t,sectionId:e,previousCid:i,nextCid:o})}),Object(M.a)("wishOrderArray")||this.initializeSectionSort(({postCid:t,sortIndex:e,sectionId:i})=>{this.sortedPost({postCid:t,sortIndex:e,sectionId:i})}))},methods:H(H(H({},Object(r.b)("post",["sortedPost"])),Object(r.b)("section",["deleteSection"])),{},{confirmDeleteSection(){window.confirm(this.__("Are you sure you want to delete this section and all its posts? This cannot be undone!"))&&this.deleteSection({sectionId:this.currentSectionId})},startNewPost(){this.$store.dispatch("post/startNewPost",{attributes:{wall_section_id:this.section.id}})}})};i(1331);function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function G(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){V(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function V(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var q={components:{SurfaceSection:Object(v.a)(W,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{class:["surface-section",{"section-sortable":t.canReorder}],style:{paddingBottom:t.shelfSectionBottomPaddingPx+"px"},attrs:{id:t.sectionDomId,"data-rank":t.sortIndex,"data-section-id":t.currentSectionId,"data-color":t.sectionColor}},[i(t.xNewPostModal?"surface-section-title-new":"surface-section-title",{tag:"component",attrs:{section:t.currentSection,"section-being-edited-id":t.sectionBeingEditedId},on:{delete:t.confirmDeleteSection}}),t._v(" "),t.shouldShowButtonAtTop?i("button",{class:{"w-[254px]":t.xNewPostModal,"flex-shrink-0 w-full border-none rounded-xl mb-4 h-8 transition":t.xNewPostModal,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-200 ":t.xNewPostModal&&"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-200 ":t.xNewPostModal&&"light"===t.colorScheme,"flat-button muted-button add-post":!t.xNewPostModal,"shadow-elevation-1":t.isUsingNewSurfaceShadows},attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost(e)}}},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1):t._e(),t._v(" "),i("div",{ref:"postsList",class:["section-posts","pb-px -mb-px",t.isFirefox||t.isSafari?"pe-4.25 ps-1 -ms-1":"me-4 ps-1 -ms-1 pe-px",{"scrollbar-photo":"light"===t.backgroundLuminance},{"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{"data-section-id":t.currentSectionId}},t._l(t.sortedSectionPosts,(function(e,o){return i("surface-post",{key:e.cid,attrs:{index:o,post:e,edit:t.inlinePostEdit,"is-last":o===t.sortedSectionPosts.length-1}})})),1),t._v(" "),t.shouldShowButtonAtBottom?i("div",{staticClass:"add-post w-[254px]",attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost(e)}}},[i("button",{class:[t.xNewPostModal?{"flex-shrink-0 border-none rounded-full w-8 h-8 transition":!0,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-100 ":"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-100 ":"light"===t.colorScheme}:"flat-button muted-button",t.isUsingNewSurfaceShadows&&"shadow-elevation-1"]},[i("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1)]):t._e()],1)}),[],!1,null,null,null).exports},mixins:[p],computed:G(G(G(G(G(G({},Object(r.e)(["wall","isIOS"])),Object(r.e)("section",["sectionsFetched","sectionBeingEditedId"])),Object(r.c)("section",["sortedSections"])),Object(r.c)(["canIModerate","isAPanelVisible","dir"])),Object(r.c)("browser",["windowHeight"])),{},{isEmptyState(){return 0===this.sortedSections.length||1===this.sortedSections.length&&!!this.sectionBeingEditedId&&this.sectionBeingEditedId===this.sortedSections[0].id},canAddSection(){return this.canIModerate&&!this.isEmptyState},isNewSectionBeingAdded(){return String(this.sectionBeingEditedId).startsWith("new_")}}),watch:{isAPanelVisible:"addSectionIfNone",windowHeight:"setMaxHeight"},beforeMount(){this.addSectionIfNone()},mounted(){this.initializeSectionsOrderSort(),this.setMaxHeight()},updated(){this.addSectionIfNone()},methods:G(G({},Object(r.b)("section",["sortedSection","startNewSection","startWithNoSections"])),{},{addSectionIfNone(){0===this.sortedSections.length&&this.sectionsFetched&&!this.isAPanelVisible&&this.startWithNoSections()},newSection:()=>({sort_index:c.a.getBottomSortIndex()}),addSection(){this.startNewSection({section:this.newSection()})},setMaxHeight(){if(this.isIOS&&navigator.userAgent.toLowerCase().includes("14_4")){const t=document.getElementById("wish-list").offsetHeight;this.$el.style=`max-height: ${t}px;`}}})},J=(i(1332),Object(v.a)(q,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"surface-sections",attrs:{dir:t.dir}},[t._l(t.sortedSections,(function(t){return i("surface-section",{key:t.id,attrs:{id:"section-"+t.id,section:t}})})),t._v(" "),i("div",{staticClass:"add-section-frame"},[t.canAddSection&&!t.isNewSectionBeingAdded?i("button",{staticClass:"flat-button muted-button add-section",on:{click:t.addSection}},[t._v("\n      "+t._s(t.__("Add section"))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports),Y=i(607),K=i(194),Q=i(74),X=i(3),Z=i(594),tt=i(165),et=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},it=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const ot=Object(n.d)("post"),nt=Object(n.d)("section"),st=Object(n.d)("composerModal"),rt=Object(n.d)("draft"),ct=Object(n.d)("postAction"),at=Object(n.d)("attachment");let dt=class extends o.f{mounted(){this.$nextTick(()=>this.toggleNewPostHandlers(this.isPostable))}beforeDestroy(){this.disableNewPostHandlers()}enableNewPostHandlers(){X.a.addEventListener("paste",this.handleOnPaste),this.enableDropToPost(this.$el)}disableNewPostHandlers(){X.a.removeEventListener("paste",this.handleOnPaste),this.disableDropToPost(this.$el)}handleOnPaste(t){var e,i,o,n;if(t.stopPropagation(),!this.isPostable)return;if(Object(tt.c)(t))return;const s=Object(K.d)(t.clipboardData);if(!s||!s.length)return;const r=(null===(i=null===(e=t.clipboardData)||void 0===e?void 0:e.types)||void 0===i?void 0:i.includes("text/rtf"))&&(null===(n=null===(o=t.clipboardData)||void 0===o?void 0:o.types)||void 0===n?void 0:n.includes("Files")),c=Object(K.e)(s,K.a.File);if(c&&!r)return this.isUsingNewComposerModal?(this.startNewDraft({attributes:c.postAttributes,shouldStartEditing:!0}),this.dockComposerModal()):this.createPost({attributes:c.postAttributes}),void Object(Q.a)("Posts","add","Paste "+c.pasteType);const a=s.filter(t=>(null===t||void 0===t?void 0:t.pasteType)!==K.a.File);this.isUsingNewComposerModal?(this.startNewDraft({attributes:a[0].postAttributes,shouldStartEditing:!0}),this.dockComposerModal()):this.createPost({attributes:a[0].postAttributes}),Object(Q.a)("Posts","add","Paste "+a[0].pasteType)}toggleNewPostHandlers(t){t?this.enableNewPostHandlers():this.disableNewPostHandlers()}scrollWallToSection(t){const e=this.postEntitiesByCid[t].wall_section_id;Object(F.a)(e)}scrollDownToPostAfterCopyOrTransfer(){var t;if(null===this.copyOrTransferPostResult&&"bottom"===this.newPostLocation&&this.copyOrTransferSectionId){const e="section-".concat(this.copyOrTransferSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(Z.b)(i)}}scrollDownToNewPost(){var t;if("bottom"===this.newPostLocation&&this.mostRecentlyTouchedSectionId){const e="section-".concat(this.mostRecentlyTouchedSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(Z.b)(i)}}scrollDownAfterPreviewImageLoaded(){var t;const e=this.mostRecentlyTouchedSectionId||this.copyOrTransferSectionId;if(e&&this.newestPost&&e==this.newestPost.wall_section_id&&"bottom"===this.newPostLocation){const i="section-".concat(e.toString()),o=null===(t=document.getElementById(i))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(Z.b)(o)}}};et([n.c,it("design:type",Object)],dt.prototype,"xHeader",void 0),et([n.b,it("design:type",Object)],dt.prototype,"newPostLocation",void 0),et([ot.Getter,it("design:type",Object)],dt.prototype,"newestPostCid",void 0),et([ot.Getter,it("design:type",Object)],dt.prototype,"postEntitiesByCid",void 0),et([ot.Getter,it("design:type",Object)],dt.prototype,"newestPost",void 0),et([ot.Getter,it("design:type",Object)],dt.prototype,"mostRecentlyTouchedSectionId",void 0),et([ct.Getter,it("design:type",Object)],dt.prototype,"copyOrTransferSectionId",void 0),et([ct.Getter,it("design:type",Object)],dt.prototype,"copyOrTransferPostResult",void 0),et([at.Getter,it("design:type",Object)],dt.prototype,"surfacePreviewImageLoaded",void 0),et([ot.Action,it("design:type",Object)],dt.prototype,"createPost",void 0),et([nt.Action,it("design:type",Object)],dt.prototype,"startEditingSection",void 0),et([nt.Action,it("design:type",Object)],dt.prototype,"deleteSection",void 0),et([n.b,it("design:type",Object)],dt.prototype,"isPostable",void 0),et([n.b,it("design:type",Object)],dt.prototype,"isUsingNewComposerModal",void 0),et([n.b,it("design:type",String)],dt.prototype,"dir",void 0),et([n.b,it("design:type",String)],dt.prototype,"backgroundLuminance",void 0),et([rt.Action,it("design:type",Function)],dt.prototype,"startNewDraft",void 0),et([st.Action("dock"),it("design:type",Function)],dt.prototype,"dockComposerModal",void 0),et([Object(o.g)("isPostable"),it("design:type",Function),it("design:paramtypes",[Object]),it("design:returntype",void 0)],dt.prototype,"toggleNewPostHandlers",null),et([Object(o.g)("newestPostCid"),it("design:type",Function),it("design:paramtypes",[Object]),it("design:returntype",void 0)],dt.prototype,"scrollWallToSection",null),et([Object(o.g)("copyOrTransferPostResult"),it("design:type",Function),it("design:paramtypes",[]),it("design:returntype",void 0)],dt.prototype,"scrollDownToPostAfterCopyOrTransfer",null),et([Object(o.g)("newestPost"),it("design:type",Function),it("design:paramtypes",[]),it("design:returntype",void 0)],dt.prototype,"scrollDownToNewPost",null),et([Object(o.g)("surfacePreviewImageLoaded"),it("design:type",Function),it("design:paramtypes",[]),it("design:returntype",void 0)],dt.prototype,"scrollDownAfterPreviewImageLoaded",null),dt=et([Object(o.a)({components:{SurfaceHeader:s.a,SurfaceSections:J},mixins:[Y.a]})],dt);var lt=dt,pt=(i(1333),Object(v.a)(lt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"wall-container"}},[t.xHeader?i("surface-header"):t._e(),t._v(" "),i("div",{ref:"wishList",class:["wish-list","background-luminance-"+t.backgroundLuminance,{"scrollbar-photo":"light"===t.backgroundLuminance,"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{id:"wish-list",dir:t.dir}},[i("surface-sections")],1),t._v(" "),i("div",{staticClass:"wish-sizer"}),t._v(" "),i("div",{staticClass:"gutter-sizer"})],1)}),[],!1,null,null,null));e.default=pt.exports}}]);
//# sourceMappingURL=131-707e36ac7cdae6a37047.chunk.js.map